<h1>Weather Forecast</h1>

<div class="search-options">
  <div class="search-by-address">
    <h2>By Address</h2>
    <%= form_with url: weather_index_path, method: :get, local: true do |form| %>
      <%= form.label :address, "Address:" %>
      <%= form.text_field :address %>
      <%= form.submit "Search" %>
    <% end %>
  </div>

  <div class="search-by-zip">
    <h2>By Postal Code</h2>
    <%= form_with url: weather_index_path, method: :get, local: true do |form| %>
      <%= form.label :zip, "Postal Code:" %>
      <%= form.text_field :zip %>
      <%= form.submit "Search" %>
    <% end %>
  </div>
</div>

<% if @forecast %>
  <div class="forecast-results">
    <h2>Weather in <%= @query %></h2>
    <p>Temperature: <%= @forecast[:main][:temp] %>°C</p>
    <% if @forecast[:postal_code].present? %>
      <p>Postal Code: <%= @forecast[:postal_code] %></p>
    <% end %>
    <p>High: <%= @forecast[:main][:temp_max] %>°C</p>
    <p>Low: <%= @forecast[:main][:temp_min] %>°C</p>
    <% if @forecast[:cached] %>
      <p class="cached-notice">Retrieved from cache</p>
    <% end %>
  </div>
<% end %>